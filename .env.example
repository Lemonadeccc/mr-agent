# =========================
# Runtime / Server
# =========================

# HTTP server port (default 3000 when not set).
# PORT=3000

# App log level for runtime logs.
LOG_LEVEL=info

# =========================
# GitHub App mode (recommended)
# =========================

# GitHub App numeric ID.
APP_ID=123456

# GitHub App private key content (single-line string with escaped \n).
PRIVATE_KEY="-----BEGIN RSA PRIVATE KEY-----\\nYOUR_PRIVATE_KEY\\n-----END RSA PRIVATE KEY-----\\n"

# Alternative to PRIVATE_KEY: absolute file path of the private key.
# PRIVATE_KEY_PATH=/abs/path/to/private-key.pem

# GitHub App webhook secret (used to verify /api/github/webhooks signatures).
WEBHOOK_SECRET=replace-with-your-webhook-secret

# =========================
# AI provider and model
# =========================

# AI provider selector: openai | openai-compatible | anthropic | gemini
AI_PROVIDER=openai

# Optional global model override (highest priority, covers all providers).
# AI_MODEL=

# OpenAI API key (used when AI_PROVIDER=openai, and also fallback for openai-compatible).
OPENAI_API_KEY=replace-with-openai-key

# OpenAI model name.
OPENAI_MODEL=gpt-4.1-mini

# OpenAI-compatible base URL (required for AI_PROVIDER=openai-compatible).
# OPENAI_BASE_URL=https://api.openai.com/v1

# OpenAI-compatible API key (optional; falls back to OPENAI_API_KEY).
# OPENAI_COMPATIBLE_API_KEY=replace-with-compatible-key

# OpenAI-compatible model name.
# OPENAI_COMPATIBLE_MODEL=deepseek-chat

# Anthropic API key.
# ANTHROPIC_API_KEY=replace-with-anthropic-key

# Anthropic model name.
# ANTHROPIC_MODEL=claude-3-5-haiku-latest

# Anthropic max output tokens per request.
# ANTHROPIC_MAX_TOKENS=4096

# Gemini API key.
# GEMINI_API_KEY=replace-with-gemini-key

# Gemini model name.
# GEMINI_MODEL=gemini-2.0-flash

# =========================
# Notification webhooks (optional)
# =========================

# Default notification webhook for both GitHub and GitLab review results.
# NOTIFY_WEBHOOK_URL=

# GitHub-specific notification webhook (overrides NOTIFY_WEBHOOK_URL for GitHub flows).
# GITHUB_PUSH_URL=

# GitLab-specific notification webhook (overrides NOTIFY_WEBHOOK_URL for GitLab flows).
# GITLAB_PUSH_URL=

# Notification HTTP timeout (ms).
# NOTIFY_HTTP_TIMEOUT_MS=15000

# Notification HTTP retry count.
# NOTIFY_HTTP_RETRIES=1

# Notification HTTP retry backoff (ms).
# NOTIFY_HTTP_RETRY_BACKOFF_MS=300

# =========================
# Plain GitHub webhook mode (non-GitHub-App)
# =========================

# Signature secret for /github/trigger (falls back to WEBHOOK_SECRET if unset).
# GITHUB_WEBHOOK_SECRET=replace-with-github-webhook-secret

# Token used to call GitHub API in plain webhook mode (preferred).
# GITHUB_WEBHOOK_TOKEN=replace-with-github-token-or-pat

# Generic GitHub token fallback (used when GITHUB_WEBHOOK_TOKEN is absent).
# GITHUB_TOKEN=replace-with-github-token-or-pat

# GitHub REST API base URL (for GitHub Enterprise, etc.).
# GITHUB_API_URL=https://api.github.com

# Skip GitHub webhook signature verification in plain mode (debug only; not for production).
# GITHUB_WEBHOOK_SKIP_SIGNATURE=false

# TTL for dedupe of merged/report events in GitHub mode, milliseconds.
# Default is 86400000 (24h). Increase for stronger idempotency, decrease for faster replay.
# GITHUB_MERGED_DEDUPE_TTL_MS=86400000

# Policy reminder comment dedupe TTL (ms) for issue/PR pre-check reminders.
# GITHUB_POLICY_COMMENT_DEDUPE_TTL_MS=600000

# Repo policy config cache TTL (ms) for `.mr-agent.yml` lookups.
# GITHUB_POLICY_CONFIG_CACHE_TTL_MS=300000

# Incremental review state TTL (ms), tracks last reviewed head sha per PR.
# GITHUB_INCREMENTAL_STATE_TTL_MS=604800000

# Check-run name used when `.mr-agent.yml` sets mode=enforce.
# GITHUB_POLICY_CHECK_NAME=MR Agent Policy

# =========================
# GitLab webhook compatibility mode
# =========================

# GitLab instance base URL (auto-inferred from payload project.web_url when unset).
# GITLAB_BASE_URL=https://gitlab.example.com

# Webhook secret for validating x-gitlab-token.
# GITLAB_WEBHOOK_SECRET=replace-with-gitlab-webhook-secret

# GitLab API token used to read MR changes and publish comments.
# GITLAB_TOKEN=replace-with-gitlab-private-token

# =========================
# Review scope / policy (optional)
# =========================

# Comma-separated file extensions treated as code review targets.
# REVIEW_CODE_EXTENSIONS=ts,tsx,js,jsx,vue,py,java,go,rs,php,rb,swift,kt,scala,c,cc,cpp,cs

# Cache TTL for GitHub process guideline files (ms).
# GITHUB_GUIDELINE_CACHE_TTL_MS=300000

# Cache TTL for GitLab process guideline files (ms).
# GITLAB_GUIDELINE_CACHE_TTL_MS=300000

# Include stack trace in webhook error JSON responses (debug only).
# EXPOSE_ERROR_STACK=false
